let toggleButton=document.getElementById("toggle-button"),newItemForm=document.getElementById("new-item-form"),newItemNameInput=document.getElementById("new-item-name"),newItemDescriptionInput=document.getElementById("new-item-description"),newItemAddButton=document.getElementById("new-item-add"),newItemCancelButton=document.getElementById("new-item-cancel");const showNewItemForm=()=>{newItemForm.classList.toggle("form-show"),toggleButton.classList.toggle("rotate")};toggleButton.addEventListener("click",showNewItemForm);let complete=e=>{e.target.closest(".list__item").classList.toggle("complete"),showOpenTasksCount()};const addNewItem=e=>{e.preventDefault();const t=createNewItem(),n=document.querySelector(".list ul");t&&(n.insertAdjacentElement("afterBegin",t),showOpenTasksCount(),bindEvents())},deleteItem=e=>{let t=document.querySelector(".list ul"),n=e.target.closest(".list__item");t.removeChild(n),showOpenTasksCount()},editItem=e=>{e.target.closest(".list__item").querySelector(".task__name").focus()},bindEvents=()=>{let e=document.querySelectorAll(".list__item .checkbox");for(let t=0;t<e.length;t++)e[t].addEventListener("change",complete);let t=document.querySelectorAll(".remove");for(let e=0;e<t.length;e++)t[e].addEventListener("click",deleteItem);let n=document.querySelectorAll(".edit");for(let e=0;e<n.length;e++)n[e].addEventListener("click",editItem)};bindEvents();const hideForm=e=>{e.preventDefault(),newItemForm.classList.remove("form-show"),toggleButton.classList.remove("rotate")};function createNewItem(){if(""===newItemNameInput.value)return alert("Enter the name of the task");if(""===newItemDescriptionInput.value)return alert("Enter the description of the task");let e=document.createElement("div");e.classList.add("status");let t=document.createElement("label"),n=document.createElement("input");n.type="checkbox",n.classList.add("option-input","checkbox"),t.appendChild(n),e.appendChild(t);let l=document.createElement("div");l.classList.add("task");let o=document.createElement("div");o.classList.add("task__name"),o.setAttribute("contenteditable","true"),o.textContent=newItemNameInput.value;let d=document.createElement("div");d.classList.add("task__description"),d.setAttribute("contenteditable","true"),d.textContent=newItemDescriptionInput.value,l.appendChild(o),l.appendChild(d);let s=document.createElement("div");s.classList.add("controls");let c=document.createElement("button");c.classList.add("edit"),c.textContent="edit";let m=document.createElement("button");m.classList.add("remove"),m.textContent="remove",s.appendChild(c),s.appendChild(m);let a=document.createElement("li");return a.classList.add("list__item"),a.appendChild(e),a.appendChild(l),a.appendChild(s),newItemNameInput.value="",newItemDescriptionInput.value="",a}const showOpenTasksCount=()=>{let e=document.querySelectorAll(".list__item"),t=0,n=document.getElementById("state__count");for(let n=0;n<e.length;n++)e[n].classList.contains("complete")||t++;n.textContent=t.toString()};window.addEventListener("load",showOpenTasksCount),newItemAddButton.addEventListener("click",addNewItem),newItemCancelButton.addEventListener("click",hideForm);